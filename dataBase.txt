CREATE SCHEMA `productos_retro`;

CREATE TABLE productos_retro.users (
  id INT PRIMARY KEY AUTO_INCREMENT,
  email VARCHAR(100) UNIQUE NOT NULL,
  password VARCHAR(100) NOT NULL,
  username VARCHAR(100),
  avatar VARCHAR(250),
  active BOOLEAN DEFAULT false,
  deleted BOOLEAN DEFAULT false,
  registrationCode VARCHAR(100),
  recoverCode VARCHAR(100),
  createdAt DATETIME NOT NULL,
  modifiedAt DATETIME
);

CREATE TABLE productos_retro.articles (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(100) NOT NULL,
  price DECIMAL NOT NULL,
  description TEXT,
  photo VARCHAR(250),
  category VARCHAR(200) NOT NULL,
  idUser INT NOT NULL,
  FOREIGN KEY (idUser) REFERENCES users(id),
  buyerId INT DEFAULT NULL,
  createdAt DATETIME NOT NULL,
  modifiedAt DATETIME
);

CREATE TABLE productos_retro.user_votes (
  id INT PRIMARY KEY AUTO_INCREMENT,
  vote TINYINT NOT NULL,
  idVotedUser INT NOT NULL,
  FOREIGN KEY (idUserVotado) REFERENCES users(id) ON DELETE CASCADE,
  createdAt DATETIME NOT NULL
);
